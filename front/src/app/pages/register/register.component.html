<main class="main-register">
    <mat-card class="card">

        <mat-card-header class="card-header" fxLayoutAlign="center center">
            <mat-card-title class="title">Register</mat-card-title>
        </mat-card-header>
        
        <form class="register-form" [formGroup]="form" (ngSubmit)="submit()">
            <mat-card-content class="card-content" fxLayout="column">
                
                <mat-label class="label">User name</mat-label>
                <mat-form-field class="field">
                    <input matInput type="text" formControlName="name">
                </mat-form-field>

                <mat-label class="label">Email</mat-label>
                <mat-form-field class="field">
                    <input matInput type="email" formControlName="email">
                </mat-form-field>

                <mat-label class="label">Password</mat-label>
                <mat-form-field class="field password">
                    <input matInput [type]="hide ? 'password' : 'text'" formControlName="password">
                    <button class="visibility" type="button" mat-icon-button matSuffix (click)="hide = !hide">
                        <mat-icon>{{hide ? 'visibility_off' : 'visibility'}}</mat-icon>
                    </button>
                </mat-form-field>

            </mat-card-content>

            <button mat-raised-button id="register_button" type="submit" [disabled]="form.invalid">Register</button>
            <div *ngIf="onError">
                <p>Account creation failed, please check that the following fields meet these criteria: </p>
                <ul>
                    <li>Email: Valid email address format</li>
                    <li>Username: Contains at least 3 characters</li>
                    <li>Password: Contains at least 8 characters, including at least one uppercase/lowercase letter, one number, and one special character </li>
                </ul>
            </div>
            <div *ngIf="onErrorEmail">
                <p class="error-message">Attention, this email is already taken by other user !</p>
            </div>
            <div *ngIf="loading" class="loading" style="margin-top: 1rem;">
                <mat-spinner [diameter]="60"></mat-spinner>
            </div>
        </form>

    </mat-card>
</main>
